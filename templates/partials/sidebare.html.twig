{% set currentRoute = app.request.attributes.get('_route') %}

<aside class="sidebar" :class="{ 'open': sidebarOpen }">
    <div class="sidebar-header">
        <div class="sidebar-logo">
            <img src="{{ asset('logo.png') }}" alt="SIGEP Tchad Logo">
        </div>
        <div class="sidebar-brand">
            <h1>SIGEP Tchad</h1>
            <span>Gestion des Projets Publics</span>
        </div>
    </div>

    <!-- User Info -->
    <div class="user-info">
        <div class="user-card">
            <div class="user-avatar">AD</div>
            <div class="user-details">
                <h4>Abdoulaye Damba</h4>
                <p>Direction Générale</p>
                <span class="user-role">Chef de Projet</span>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="sidebar-nav">

        <!-- Navigation générale -->
        <div class="nav-section">
            <div class="nav-section-title">Navigation</div>

            <a href="{{ path('app_dashboard') }}"
               class="nav-item {{ currentRoute starts with 'app_dashboard' ? 'active' }}">
                <i class="ri-dashboard-line"></i>
                <span>Tableau de bord</span>
            </a>

            <a href="{{ path('app_partners') }}"
               class="nav-item {{ currentRoute starts with 'app_partners' ? 'active' }}">
                <i class="ri-team-line"></i>
                <span>Partenaires</span>
            </a>

            <a href="{{ path('app_institutions') }}"
               class="nav-item {{ currentRoute starts with 'app_institutions' ? 'active' }}">
                <i class="ri-government-line"></i>
                <span>Institutions</span>
            </a>
        </div>

        <!-- Projets & Finances -->
        <div class="nav-section">
            <div class="nav-section-title">Projets & Finances</div>

            <a href="{{ path('app_projects') }}"
               class="nav-item {{ currentRoute starts with 'app_projects' ? 'active' }}">
                <i class="ri-briefcase-line"></i>
                <span>Projets</span>
            </a>

            <a href="{{ path('app_financements') }}"
               class="nav-item {{ currentRoute starts with 'app_financements' ? 'active' }}">
                <i class="ri-bank-line"></i>
                <span>Financements</span>
            </a>

             <a href="{{ path('app_decaissement_index') }}"
               class="nav-item {{ currentRoute starts with 'app_decaissement_index' ? 'active' }}">
                <i class="ri-bank-line"></i>
                <span>Decaissements</span>
            </a>

            <a href="{{ path('app_convention_index') }}"
            class="nav-item {{ currentRoute starts with 'app_convention' ? 'active' }}">
                <i class="ri-file-list-3-line"></i>
                <span>Conventions</span>
            </a>

            <a href="{{ path('app_audit_index') }}"
            class="nav-item {{ currentRoute starts with 'app_audit' ? 'active' }}">
                <i class="ri-file-list-3-line"></i>
                <span>Audits</span>
            </a>
        </div>

        <!-- Gestion des utilisateurs -->
        <div class="nav-section">
            <div class="nav-section-title">Gestion des utilisateurs</div>

            <a href="#"
               class="nav-item {{ currentRoute starts with 'app_roles' or currentRoute starts with 'app_login_history' ? 'active' }}">
                <i class="ri-user-3-line"></i>
                <span>Utilisateurs</span>
            </a>

               <a href="{{ path('app_roles') }}"
                   class="nav-item {{ currentRoute starts with 'app_roles' ? 'active' }}">
                    <i class="ri-shield-user-line"></i>
                    <span>Rôles</span>
                </a>

                <a href="{{ path('app_login_history') }}"
                   class="nav-item {{ currentRoute starts with 'app_login_history' ? 'active' }}">
                    <i class="ri-history-line"></i>
                    <span>Historiques de connexion</span>
                </a>
                
        </div>


        


        <!-- Compte -->
        <div class="nav-section">
            <div class="nav-section-title">Compte</div>

            <a href="{{ path('app_profile') }}"
               class="nav-item {{ currentRoute starts with 'app_profile' ? 'active' }}">
                <i class="ri-user-settings-line"></i>
                <span>Mon profil</span>
            </a>

            <a href="{{ path('app_logout') }}" class="nav-item">
                <i class="ri-logout-box-r-line"></i>
                <span>Se déconnecter</span>
            </a>
        </div>

    </nav>
</aside>
